<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <script src="{{url_for('static', filename='d3.js')}}"></script>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <style>
    .container {

      display: grid;
      place-items: center;
    }

    .isInvalid {
      border-width: 2;
      border-color: red;
    }
    .grey {
  background-color: rgba(128,128,128,.25);
}
.red {
  background-color: rgba(255,0,0,.25);
}
.blue {
  background-color: rgba(0,0,255,.25);
}
  </style>
  <title>daty</title>

</head>

<body>

        


<table class="table" id="my-table">
    <colgroup>
        <col class="white" />
        <col class="white" />
        <col class="red" />
        <col class="red" />
        <col class="blue" />
        <col class="blue" />     
      </colgroup>
    <thead>
      <tr>
        <th>nr raty</th>
        <th>dzień płatności</th>
        <th>kapitał do spłaty I</th>
        <th>wysokość raty I</th>
        <th>kapitał do spłaty II</th>
        <th>wysokość raty II</th>
      </tr>
    </thead>
    <tbody>
    </tbody>
  </table>

  <script>

    var tech_data = JSON.parse('{{tech_data|tojson|safe}}');

    

    //tech_data.forEach(element => console.log(new Date(element.Data).getDay()));

    const parseDzien = d3.timeParse("%Y-%m-%d")

   

    console.log(tech_data['dane2']['raty'][1])

    var tbody = d3.select("#my-table tbody");

    var rows = tbody.selectAll("tr")
    .data(tech_data['dane']['raty']);

    zloty = function (d) { return d3.format(",.2f")(d) + " zł"; }

    // Enter new rows
    rows.enter()
    .append("tr")
    .merge(rows)
    .html(function(d,i) {
    return "<td>" + d.nr_raty + "</td><td>" + d.dzien.slice(0,10) + "</td><td>" + zloty(d.K) +"</td><td>" + zloty(d.rata) + "</td><td>" +  zloty(tech_data['dane2']['raty'][i]['K']) + "</td><td>" + zloty(tech_data['dane2']['raty'][i]['rata']) + "</td>";
    });

    

    




  </script>

</body>

</html>