<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <script src="{{url_for('static', filename='d3.js')}}"></script>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <style>
    .container {

      display: grid;
      place-items: center;
    }

    .isInvalid {
      border-width: 2;
      border-color: red;
    }
  </style>
  <title>daty</title>

</head>

<body>
<div id="rys"></div>
        




  <script>

var tech_data = JSON.parse('{{datki|tojson|safe}}');

    

    //tech_data.forEach(element => console.log(new Date(element.Data).getDay()));

    const parseDzien = d3.timeParse("%Y-%m-%d")

    tech_data.forEach(function (d) {
        d.Data = parseDzien(d.Data)
        d.Otwarcie = parseFloat(d.Otwarcie)
    });

    console.log(tech_data)

    var margin = { top: 0, right: 130, bottom: 100, left: 0 },
    width = 1000 - margin.left - margin.right,
    height = 1050 - margin.top - margin.bottom;

    var svg = d3.select("#rys")
    .append("svg")
    .attr("class", "svg-holder")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .attr("style", "border:1px solid black;")
    .style('background', "white")
    .append("g")
    .attr("transform",
        "translate(" + margin.left + "," + margin.top + ")");

    svg.append('rect')
    .attr('class', 'jolo')
    .attr('width', '100%')
    .attr('height', '100%')
    .attr('fill', 'red')

    var xscale = d3.scaleTime().domain(d3.extent(tech_data, d => d.Data)).range([0, width]);

    function toDegrees (angle) {
        return angle * (180 / Math.PI);
    }

    function toRadians (angle) {
    return angle * (Math.PI / 180);
    }

    svg.selectAll('.kw')
    .data(tech_data).enter()
    .append('rect')
    .attr('class', 'kw')
    .attr('x', d => 100+xscale(d.Data)*Math.cos(toRadians(5*new Date(d.Data).getDay())) )
    .attr('y', d => 100+xscale(d.Data)*Math.sin(toRadians(5*new Date(d.Data).getDay())))
    .attr('width', '10')
    .attr('height', '10')
    .attr('fill', 'green')

    startg = svg.append('g').attr("transform",
        "translate(" + 80 + "," + 100 + ")");

    startg.selectAll('.circTem')
    .data([0,1,2,3,4,5,6])
    .enter()
    .append('circle')
    .attr('class', '.circTem')
    .attr('cx', d=> d*50)
    .attr('cy', 0)
    .attr('r', 10)
    .attr('stroke', "blue")
    .attr('stroke-width', 3)
    .attr('fill', "red")

    startg.selectAll('.circTem')
    .data([0,1,2,3,4,5,6])
    .enter()
    .append('circle')
    .attr('class', '.circTem')
    .attr('cx', d=> d*50)
    .attr('cy', 0)
    .attr('r', 5)
    .attr('fill', "green")

    




  </script>

</body>

</html>